# 18. 構造化ログ基盤整備

## 目的 / 背景

- 運用/分析性向上 (`docs/plan_0907.md` 品質/運用)。

## 完了条件

- ログライブラリ選定 (標準log + フォーマッタ or zap/logrus)。
- 出力フィールド: `ts`, `level`, `msg`, `request_id`, `latency_ms`, `score` (solve時), `endpoint`。
- リクエストごと request_id をコンテキストに注入。
- Solveハンドラで latency, score を Info ログ出力。

## スコープ

- 含む: logger 初期化, middleware で request_id 生成。
- 含まない: 外部集約(Sentry, ELK)。

## 作業手順

- [ ] ライブラリ採用 (例: zap)
- [ ] `internal/logging/logger.go`
- [ ] request_id middleware
- [ ] ハンドラ書換 (log.Printf -> logger)
- [ ] 単体/手動テスト

## 依存関係 / リスク

- 依存: Solveエンドポイント実装
- リスク: 過度なログ → レベル管理

## 見積り / 担当 / 期日

- 見積り: 0.5人日
- 担当: 未定
- 期日: Sprint3 (2025-09-23)

## 参考リンク

- `../plan_0907.md`
