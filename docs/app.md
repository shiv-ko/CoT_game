# 🧠 プロンプトバトルWebアプリ 開発ドキュメント

このアプリは、プレイヤーがAIに与えるプロンプトで計算問題を解かせ、その正確性を競うランキング形式のWebアプリです。

---

## 🔧 技術スタックと役割

| 技術        | 役割                                                 |
|-------------|------------------------------------------------------|
| Next.js     | フロントエンド。UI構築、ルーティング、API通信などを担当。 |
| Go          | バックエンド。APIサーバー、スコア評価、DB処理を担当。     |
| Docker      | 開発・本番環境の構築・統一。全コンポーネントのコンテナ化。 |
| Gemini API  | AI推論API（Google製）。ユーザープロンプトで問題を解かせる。|
| PostgreSQL  | スコア、ユーザー、問題などの永続化DB。                  |

---

## 📋 機能一覧

### 🎮 ユーザー側機能

- [ ] ユーザー登録・ログイン
- [ ] 問題の表示（レベル別）
- [ ] プロンプト入力とAIへの送信
- [ ] AIの出力と正解比較
- [ ] スコアの記録と可視化
- [ ] ランキング表示
- [ ] 過去の自分のスコア確認

### 🛠 管理・システム機能

- [ ] 問題バンク管理（ID, 問題文, 正解）
- [ ] AI出力の評価（数値の一致・誤差）
- [ ] Gemini / OpenAI API 切替対応
- [ ] ログ保存（プロンプト、出力、正答との比較）

---

## 🧱 初期構成（Docker）
project-root/
├── frontend/ # Next.js アプリケーション
│ ├── pages/
│ ├── components/
│ └── ...
├── backend/ # Go API サーバー
│ ├── main.go
│ ├── handlers/
│ ├── models/
│ └── routes/
├── db/ # PostgreSQL 初期化SQLなど
│ └── init.sql
├── docker-compose.yml # 全体統合
├── .env # APIキー、DB接続情報など
└── README.md


---

## 🧠 AI APIとの連携構成

[ユーザーのプロンプト] → [Next.js UI] → [Go APIサーバー]
↓
[Gemini API / OpenAI API にプロンプト送信]
↓
[AIの計算結果を取得]
↓
[正解と照合しスコア計算]
↓
[スコアDB保存・ランキング更新]


---

## 📝 スコアリング例（評価ロジック）

| 状況                           | 得点    |
|--------------------------------|---------|
| 完全一致（100%正確）           | 100点   |
| 小数点誤差あり（誤差 < 0.01） | 95点    |
| 数値抽出成功（説明文含む）     | 80点    |
| 誤答・出力失敗                 | 0点     |

※評価ロジックはGoバックエンドで正規表現や誤差範囲を使って実装予定

---

## 🚀 今後の開発ステップ（優先度順）

1. [ ] 問題バンクの実装（DB+API）
2. [ ] AI連携API（Gemini / OpenAI）
3. [ ] プロンプト送信＆結果取得フォーム（Next.js）
4. [ ] スコア評価と記録（Go）
5. [ ] ランキング表示（Next.js + DB）

---

## 🔒 セキュリティ・その他考慮事項

- APIキーは `.env` に保存し、Dockerで注入
- レートリミットの実装（AI APIのコスト対策）
- ユーザーデータの保存は最低限
- フロント・バックともにエラーハンドリング実装

---

## ✨ 発展アイデア

- プロンプト長制限、キーワード制限で難易度調整
- 他人のプロンプト閲覧・投票（学習要素）
- GPTとGeminiの性能比較モード
- 複数問題を連続で挑戦する「バトルモード」

---

## 🏁 まとめ

このアプリは、プロンプトエンジニアリングの実力を競う新しい形式のゲームです。  
ユーザーがAIを"操作する武器"として使いこなす力を可視化し、学習にもつながる競技性のある体験を提供します。


